<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  <meta name=referrer content=never>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>释名 | 醉梦书屋</title>
  <meta name="description" content="“天龙八部”这名词出于佛经。许多大乘佛经叙述佛向诸菩萨、比丘等说法时，常有天龙八部参与听法。如《法华经·提婆达多品》：“天龙八部、人与非人，皆遥见彼龙女成佛”。“非人”是形貌似人而实际不是人的众生。 “天龙八部”都是“非人”，包括八种神道怪物，因为以“天”及“龙”为首，所以称为“天龙八部”。八部者，一天，二龙，三夜叉，四乾达婆，五阿修罗，六迦楼罗，七紧那罗，八摩呼罗迦。 “天”是指天神。在佛教中，">
<meta property="og:type" content="article">
<meta property="og:title" content="释名">
<meta property="og:url" content="//book.drunkdream.com/jinyong/tianlongbabu/shiming.html">
<meta property="og:site_name" content="醉梦书屋">
<meta property="og:description" content="“天龙八部”这名词出于佛经。许多大乘佛经叙述佛向诸菩萨、比丘等说法时，常有天龙八部参与听法。如《法华经·提婆达多品》：“天龙八部、人与非人，皆遥见彼龙女成佛”。“非人”是形貌似人而实际不是人的众生。 “天龙八部”都是“非人”，包括八种神道怪物，因为以“天”及“龙”为首，所以称为“天龙八部”。八部者，一天，二龙，三夜叉，四乾达婆，五阿修罗，六迦楼罗，七紧那罗，八摩呼罗迦。 “天”是指天神。在佛教中，">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-04-24T05:13:49.711Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="释名">
<meta name="twitter:description" content="“天龙八部”这名词出于佛经。许多大乘佛经叙述佛向诸菩萨、比丘等说法时，常有天龙八部参与听法。如《法华经·提婆达多品》：“天龙八部、人与非人，皆遥见彼龙女成佛”。“非人”是形貌似人而实际不是人的众生。 “天龙八部”都是“非人”，包括八种神道怪物，因为以“天”及“龙”为首，所以称为“天龙八部”。八部者，一天，二龙，三夜叉，四乾达婆，五阿修罗，六迦楼罗，七紧那罗，八摩呼罗迦。 “天”是指天神。在佛教中，">
  <!-- Canonical links -->
  <link rel="canonical" href="//book.drunkdream.com/jinyong/tianlongbabu/shiming.html">
  
    <link rel="alternate" href="/atom.xml" title="醉梦书屋" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  <!-- font-awesome CSS -->
  <!-- <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
  <link rel="stylesheet" href="/css/style.css">
  
    
    

</head>


<body class="main-center theme-purple no-sidebar" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="" target="_blank">
          <img class="img-circle img-rotate" src="/images/avatar.gif" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">醉梦书屋</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">致我亲爱的毛毛</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> drunkdream</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav">
        
        
        
        <li class="menu-item menu-item-home">
          <a href="/">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        
        <li class="menu-item menu-item-fairystory active">
          <a href="/fairystory">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">童话故事</span>
          </a>
        </li>
        
        
        
        <li class="menu-item menu-item-classic">
          <a href="/classic">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">经典名著</span>
          </a>
        </li>
        
        
        
        <li class="menu-item menu-item-jinyong">
          <a href="/jinyong">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">金庸武侠</span>
          </a>
        </li>
        
        
        
        <li class="menu-item menu-item-caidongpan">
          <a href="/caidongpan">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">蔡东潘历史演义</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://drunkdream.com/" target="_blank" title="Blog" data-toggle=tooltip data-placement=top><i class="icon icon-blog"></i></a></li>
        
        <li><a href="https://github.com/drunkdream" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://t.qq.com/drunkdream" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>书籍是进步的阶梯，希望毛毛可以在书海中寻找到自己人生的方向，领悟到人生的哲理！</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/fairystory/">fairystory</a><i class="icon icon-angle-right"></i><a class="category-link" href="/fairystory/zhengyuanjie-fairytales/">zhengyuanjie-fairytales</a>
              </p>
              <p class="item-title">
                <a href="/fairystory/zhengyuanjie-fairytales/shukehebeitalixianji.html" class="title">舒克和贝塔历险记</a>
              </p>
              <p class="item-date">
                <time datetime="2018-05-03T12:10:36.000Z" itemprop="datePublished">2018-05-03</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/fairystory/">fairystory</a><i class="icon icon-angle-right"></i><a class="category-link" href="/fairystory/zhengyuanjie-fairytales/">zhengyuanjie-fairytales</a>
              </p>
              <p class="item-title">
                <a href="/fairystory/zhengyuanjie-fairytales/index.html" class="title">郑渊洁童话</a>
              </p>
              <p class="item-date">
                <time datetime="2018-05-03T11:44:49.000Z" itemprop="datePublished">2018-05-03</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/classic/">classic</a><i class="icon icon-angle-right"></i><a class="category-link" href="/classic/shuihuzhuan/">shuihuzhuan</a>
              </p>
              <p class="item-title">
                <a href="/classic/shuihuzhuan/diyibaiershihui.html" class="title">第一百二十回　宋公明神聚蓼儿　徽宗帝梦游梁山泊</a>
              </p>
              <p class="item-date">
                <time datetime="2018-04-25T11:07:26.000Z" itemprop="datePublished">2018-04-25</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/classic/">classic</a><i class="icon icon-angle-right"></i><a class="category-link" href="/classic/shuihuzhuan/">shuihuzhuan</a>
              </p>
              <p class="item-title">
                <a href="/classic/shuihuzhuan/diyibaiyishijiuhui.html" class="title">第一百一十九回　鲁智深浙江坐化　宋公明衣锦还乡</a>
              </p>
              <p class="item-date">
                <time datetime="2018-04-25T11:07:24.000Z" itemprop="datePublished">2018-04-25</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/classic/">classic</a><i class="icon icon-angle-right"></i><a class="category-link" href="/classic/shuihuzhuan/">shuihuzhuan</a>
              </p>
              <p class="item-title">
                <a href="/classic/shuihuzhuan/diyibaiyishibahui.html" class="title">第一百一十八回　卢俊义大战昱岭关　宋公明智取清溪洞</a>
              </p>
              <p class="item-date">
                <time datetime="2018-04-25T11:07:22.000Z" itemprop="datePublished">2018-04-25</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-jinyong/tianlongbabu/释名" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      释名
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<time datetime="2018-04-21T14:09:00.000Z" itemprop="datePublished">2018-04-21</time>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/jinyong/">金庸武侠</a><i class="icon icon-angle-right"></i><a class="article-category-link" href="/jinyong/tianlongbabu/">天龙八部</a>
  </span>

        

        

	<span class="article-read hidden-xs">
    	<i class="icon icon-eye-fill" aria-hidden="true"></i>
    	<span id="/jinyong/tianlongbabu/shiming.html" class="leancloud_visitors"  data-flag-title="释名">0</span>
    </span>

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/jinyong/tianlongbabu/shiming.html#comments" class="article-comment-link">评论</a></span>
        
        
	
		<span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 1,511(字)</span>
	
	
		<span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 5(分)</span>
	

        
      </div>
    </div>
    <div class="article-entry markdown-body" itemprop="articleBody" style="text-indent:28px;">
      
        <p>“天龙八部”这名词出于佛经。许多大乘佛经叙述佛向诸菩萨、比丘等说法时，常有天龙八部参与听法。如《法华经·提婆达多品》：“天龙八部、人与非人，皆遥见彼龙女成佛”。“非人”是形貌似人而实际不是人的众生。</p>
<p>“天龙八部”都是“非人”，包括八种神道怪物，因为以“天”及“龙”为首，所以称为“天龙八部”。八部者，一天，二龙，三夜叉，四乾达婆，五阿修罗，六迦楼罗，七紧那罗，八摩呼罗迦。</p>
<p>“天”是指天神。在佛教中，天神的地位并非至高无上，只不过比人能享受到更大、更长久的福报而已。佛教认为一切事物无常，天神的寿命终了之后，也是要死的。天神临死之前有五种征状：衣裳垢腻、头上花萎、身体臭秽、腋下汗出、不乐本座（第五个征状或说是“玉女离散”），这就是所谓“天人五衰”，是天神最大的悲哀。帝释是众天神的领袖。</p>
<p>“龙”是指龙神。佛经中的龙，和我国传说中的龙大致差不多，不过没有脚，有时大蟒蛇也称为龙。事实上，中国人对龙和龙王的观念，主要是从佛经中来的。佛经中有五龙王、七龙王、八龙王等等名称。古印度人对龙很是尊敬，认为水中生物以龙的力气最大，因此对德行崇高的人尊称为“龙象”，如“西来龙象”，那是指从西方来的高僧。古印度人以为下雨是龙从大海中取水而洒下人间。中国人也接受了这种说法，历本上注明几龙取水，表示今年雨量的多寡。龙王之中，有一位叫做沙竭罗龙王，他的幼女八岁时到释迦牟尼所说法的灵鹫山前，转为男身，现成佛之相。她成佛之时，为天龙八部所见。</p>
<p>“夜叉”是佛经中的一种鬼神，有“夜叉八大将”、“十六大夜叉将”等名词。“夜叉”的本义是能吃鬼的神，又有敏捷、勇健、轻灵、秘密等意思。《维摩经》注：“什曰：‘夜叉有三种：一、在地，二、在空虚，三、天夜叉也。’”现在我们说到“夜叉”都是指恶鬼。但在佛经中，有很多夜叉是好的，夜叉八大将的任务是“维护众生界”。</p>
<p>“乾达婆”是一种不吃酒肉、只寻香气作为滋养的神，是服侍帝释的乐神之一，身上发出浓冽的香气。“乾达婆”在梵语中又是“变幻莫测”的意思，魔术师也叫“乾达婆”，海市蜃楼叫做“乾达婆城”。香气和音乐都是缥缈隐约，难以捉摸。</p>
<p>“阿修罗”这种神道非常特别，男的极丑陋，而女的极美丽。阿修罗王常常率部和帝释战斗，因为阿修罗有美女而无美好食物，帝释有美食而无美女，互相妒忌抢夺，每有恶战，总是打得天翻地覆。我们常称惨遭轰炸、尸横遍地的大战场为“修罗场”，就是由此而来。大战的结果，阿修罗王往往打败，有一次他大败之后，上天下地，无处可逃，于是化身潜入藕的丝孔之中。阿修罗王性子暴躁、执拗而善妒。释迦牟尼说法，说“四念处”，阿修罗王也说法，说“五念处”；释迦牟尼说“三十七道品”，阿修罗王偏又多一品，说“三十八道品”。佛经中的神话故事大都是譬喻。阿修罗王权力很大，能力很大，就是爱搞“老子不信邪”、“天下大乱，越乱越好”的事。阿修罗又疑心病很重，《大智度论·卷三十五》：</p>
<p>“阿修罗其心不端故，常疑于佛，谓佛助天。佛为说‘五众’，谓有六众，不为说一；若说‘四谛’，谓有五谛，不说一事。”</p>
<p>“五众”即“五蕴”，五蕴、四谛是佛法中的基本观念。阿修罗听佛说法，疑心佛偏袒帝释，故意少说了一样。</p>
<p>“迦楼罗”是一种大鸟，翅有种种庄严宝色，头上有一个大瘤，是如意珠。此鸟鸣声悲苦，以龙为食。旧说部中说岳飞是“大鹏金翅鸟”投胎转世，迦楼罗就是大鹏金翅鸟。它每天要吃一个龙王及五百条小龙。到它命终时，诸龙吐毒，无法再吃，于是上下翻飞七次，飞到金刚轮山顶上命终。因为它一生以龙（大毒蛇）为食物，体内积蓄毒气极多，临死时毒发自焚。肉身烧去后只余一心，作纯青琉璃色。</p>
<p>“紧那罗”在梵语中为“人非人”之意。他形状和人一样，但头上生一只角，所以称为“人非人”，善于歌舞，是帝释的乐神。</p>
<p>“摩呼罗迦”是大蟒神，人身而蛇头。</p>
<p>这部小说以《天龙八部》为名，写的是北宋时云南大理国的故事。</p>
<p>大理国是佛教国家，皇帝都崇信佛教，往往放弃皇位，出家为僧，是我国历史上一个十分奇特的现象。据历史记载，大理国的皇帝中，圣德帝、孝德帝、保定帝、宣仁帝、正廉帝、神宗等都避位为僧。《射雕英雄传》中所写的南帝段皇爷，就是大理国的皇帝。《天龙八部》的年代在《射雕英雄传》之前。</p>
<p>本书故事发生于北宋哲宗元祐、绍圣年间，公元１０９４年前后。</p>
<p>天龙八部这八种神道精怪，各有奇特个性和神通，虽是人间之外的众生，却也有尘世的欢喜和悲苦。这部小说里没有神道精怪，只是借用这个佛经名词，以象征一些现世人物，就像《水浒》中有母夜叉孙二娘、摩云金翅欧鹏。</p>

      
    </div>
    
    
    
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="https://book.drunkdream.com/jinyong/tianlongbabu/shiming.html" title="释名" target="_blank" rel="external">https://book.drunkdream.com/jinyong/tianlongbabu/shiming.html</a>
    </li>
    
    <li class="post-copyright-license">
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.gif" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">醉梦书屋</span><small class="ml-1x">致我亲爱的毛毛</small></a></h3>
        <div></div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <div id="comments">
  	
  </div>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    
    <li class="next">
      <a href="/jinyong/tianlongbabu/index.html" title="天龙八部"><i class="icon icon-angle-left" aria-hidden="true"></i><span>上一篇&nbsp;&nbsp;</span></a>
    </li>
    
    
    <li class="prev">
      <a href="/jinyong/tianlongbabu/di01zhang.html" title="第01章　青衫磊落险峰行"><span>&nbsp;&nbsp;下一篇</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>感谢您的支持，我会继续努力的!</p>
          </div>
          <div class="tab-content">
            
            <div role="tabpanel" class="tab-pane fade active in" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              
              <li role="presentation" class="active">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://drunkdream.com/" target="_blank" title="Blog" data-toggle=tooltip data-placement=top><i class="icon icon-blog"></i></a></li>
        
        <li><a href="https://github.com/drunkdream" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://t.qq.com/drunkdream" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="/js/jquery.min.js"><\/script>')
</script>
<script src="/js/plugin.min.js"></script>
<script src="/js/application.js"></script>
  
    
    
    
        <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>
    
    
    
        


<!-- custom analytics part create by xiamo -->
<script src="https://cdn1.lncld.net/static/js/av-min-1.2.1.js"></script>
<script defer>
AV.init({
  appId: 'Tl4KfN430PcyoiLEd34J95Cx-gzGzoHsz',
  appKey: 'M6ia7SAx3xNTQ8SMIXzJdqst'
});

function showTime(Counter) {
	var query = new AV.Query(Counter);
		var visitors= $('.leancloud_visitors');
		query.greaterThanOrEqualTo("time", 0);		
		query.find({
			success: function(results) {
				if (results.length == 0) {				
					return;
				}
				var data = results;
				visitors.each(function(){
					var url = $(this).attr('id').trim();					
					for (var i = 0; i < data.length; i++) {
						var object = data[i];
						var content = object.get('time');
						var _url = object.get('url')
						if(url == _url){
							$(this).text(content);
						}
					}
				})
				
			},
			error: function(object, error) {
				console.log("Error: " + error.code + " " + error.message);
			}
		});
}

function addCount(Counter) {
	var Counter = AV.Object.extend("Counter");
	url = $(".leancloud_visitors").attr('id').trim();
	title = $(".leancloud_visitors").attr('data-flag-title').trim();
	var query = new AV.Query(Counter);
	query.equalTo("url", url);
	query.find({
		success: function(results) {
			if (results.length > 0) {
				var counter = results[0];
				counter.fetchWhenSave(true);
				counter.increment("time");
				counter.save(null, {
					success: function(counter) {
						var content = counter.get('time');
						$(document.getElementById(url)).text(content);
					},
					error: function(counter, error) {
						console.log('Failed to save Visitor num, with error message: ' + error.message);
					}
				});
			} else {
				var newcounter = new Counter();
				newcounter.set("title", title);
				newcounter.set("url", url);
				newcounter.set("time", 1);
				newcounter.save(null, {
					success: function(newcounter) {
					    console.log("newcounter.get('time')="+newcounter.get('time'));
						var content = newcounter.get('time');
						$(document.getElementById(url)).text(content);
					},
					error: function(newcounter, error) {
						console.log('Failed to create');
					}
				});
			}
		},
		error: function(error) {
			console.log('Error:' + error.code + " " + error.message);
		}
	});
}
$(function() {
	var Counter = AV.Object.extend("Counter");
	if ($('.leancloud_visitors').length == 1) {
		addCount(Counter);
	} else {
		showTime(Counter);
	}
}); 
</script>

    
    
          
    <script src='/js/Valine.min.js'></script>
<script defer type="text/javascript">
$(document).ready(function(){
    new Valine({
        el: '#comments',
        notify:false, 
        verify:false, 
        appId: '',
        appKey: '',
        placeholder: '欢迎发表评论',
        path:window.location.pathname, 
        avatar:'mm' ,
        lang:'zh-cn'
    });
});
</script>

    
    



</body>
</html>